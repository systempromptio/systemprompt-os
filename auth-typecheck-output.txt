
> @systemprompt/os@0.1.0 typecheck
> tsc --noEmit

src/modules/core/agents/index.ts(59,50): error TS2345: Argument of type 'DatabaseService' is not assignable to parameter of type 'DatabaseConnection'.
  Type 'DatabaseService' is missing the following properties from type 'DatabaseConnection': prepare, close
src/modules/core/auth/index.ts(90,5): error TS2741: Property 'getTunnelService' is missing in type '{ service: () => AuthService; tokenService: () => TokenService; userService: () => UserService; authCodeService: () => AuthCodeService; mfaService: () => MFAService; auditService: () => AuthAuditService; ... 8 more ...; getTunnelStatus: () => unknown; }' but required in type 'IAuthModuleExports'.
src/modules/core/auth/index.ts(164,9): error TS2345: Argument of type 'ILogger' is not assignable to parameter of type 'Logger'.
  Types of property 'debug' are incompatible.
    Type '(source: LogSource, message: string, args?: LogArgs | undefined) => void' is not assignable to type '(message: string, ...args: any[]) => void'.
      Types of parameters 'source' and 'message' are incompatible.
        Type 'string' is not assignable to type 'LogSource'.
src/modules/core/cli/cli/list.ts(87,19): error TS6133: 'logger' is declared but its value is never read.
src/modules/core/cli/cli/refresh.ts(24,44): error TS2345: Argument of type '"cli"' is not assignable to parameter of type 'ModuleName'.
src/modules/core/cli/cli/status.ts(24,44): error TS2345: Argument of type '"cli"' is not assignable to parameter of type 'ModuleName'.
src/modules/core/cli/index.ts(197,27): error TS2339: Property 'service' does not exist on type '{}'.
src/modules/core/cli/index.ts(197,63): error TS2339: Property 'service' does not exist on type '{}'.
src/modules/core/cli/index.ts(201,10): error TS2352: Conversion of type 'IModuleInstance' to type 'IModule<ICLIModuleExports>' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
  Type 'IModuleInstance' is missing the following properties from type 'IModule<ICLIModuleExports>': status, exports
src/modules/core/cli/services/cli-formatter.service.ts(228,17): error TS6133: 'category' is declared but its value is never read.
src/modules/core/cli/services/database-clear.service.ts(47,29): error TS6133: 'logger' is declared but its value is never read.
src/modules/core/cli/services/database-status.service.ts(107,9): error TS2322: Type '{ connected: boolean; initialized: Promise<boolean>; type: "sqlite" | "postgres"; timestamp: string; }' is not assignable to type '{ connected: boolean; initialized: boolean; type: string; timestamp: string; tableCount?: number; tables?: string[]; schemaVersions?: { module: string; version: string; }[]; error?: string; }'.
  Types of property 'initialized' are incompatible.
    Type 'Promise<boolean>' is not assignable to type 'boolean'.
src/modules/core/cli/services/database-summary.service.ts(60,29): error TS6133: 'logger' is declared but its value is never read.
src/modules/core/cli/services/database-view.service.ts(73,29): error TS6133: 'logger' is declared but its value is never read.
src/modules/core/cli/utils/spinner.ts(6,8): error TS6133: 'ora' is declared but its value is never read.
src/modules/core/cli/utils/spinner.ts(6,53): error TS6133: 'OraOptions' is declared but its value is never read.
src/modules/core/cli/utils/spinner.ts(8,1): error TS6133: 'randomBytes' is declared but its value is never read.
src/modules/core/cli/utils/spinner.ts(9,1): error TS6133: 'chalk' is declared but its value is never read.
src/modules/core/cli/utils/spinner.ts(61,20): error TS2564: Property 'spinner' has no initializer and is not definitely assigned in the constructor.
src/modules/core/cli/utils/spinner.ts(62,20): error TS2564: Property 'startTime' has no initializer and is not definitely assigned in the constructor.
src/modules/core/cli/utils/spinner.ts(156,34): error TS2554: Expected 0 arguments, but got 1.
src/modules/core/cli/utils/spinner.ts(173,43): error TS2554: Expected 0 arguments, but got 1.
src/modules/core/cli/utils/spinner.ts(196,44): error TS2554: Expected 0 arguments, but got 1.
src/modules/core/config/cli/list.ts(7,1): error TS6133: 'ConfigValue' is declared but its value is never read.
src/modules/core/config/cli/list.ts(19,45): error TS6133: 'isLast' is declared but its value is never read.
src/modules/core/config/cli/model.ts(320,7): error TS2412: Type 'SafetySetting[] | undefined' is not assignable to type 'SafetySetting[] | undefined' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.
src/modules/core/config/cli/model.ts(322,7): error TS2412: Type 'Tool[] | undefined' is not assignable to type 'Tool[] | undefined' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.
src/modules/core/config/cli/model.ts(330,16): error TS2339: Property 'usageMetadata' does not exist on type 'GenerateContentResult'.
src/modules/core/config/cli/model.ts(333,44): error TS2339: Property 'usageMetadata' does not exist on type 'GenerateContentResult'.
src/modules/core/config/cli/model.ts(334,46): error TS2339: Property 'usageMetadata' does not exist on type 'GenerateContentResult'.
src/modules/core/config/cli/model.ts(335,43): error TS2339: Property 'usageMetadata' does not exist on type 'GenerateContentResult'.
src/modules/core/config/index.ts(16,1): error TS6133: 'DatabaseService' is declared but its value is never read.
src/modules/core/database/adapters/module.adapter.ts(108,16): error TS2416: Property 'execute' in type 'SqliteModuleAdapter' is not assignable to the same property in base type 'IModuleDatabaseAdapter'.
  Type '(sql: string, params?: unknown[] | undefined) => Promise<void>' is not assignable to type '(sql: string, params?: unknown[] | undefined) => Promise<IMutationResult>'.
    Type 'Promise<void>' is not assignable to type 'Promise<IMutationResult>'.
      Type 'void' is not assignable to type 'IMutationResult'.
src/modules/core/database/adapters/module.adapter.ts(145,3): error TS2322: Type 'SqliteModuleAdapter' is not assignable to type 'IModuleDatabaseAdapter'.
  The types returned by 'execute(...)' are incompatible between these types.
    Type 'Promise<void>' is not assignable to type 'Promise<IMutationResult>'.
      Type 'void' is not assignable to type 'IMutationResult'.
src/modules/core/database/index.ts(127,59): error TS2345: Argument of type 'DatabaseService' is not assignable to parameter of type 'IDatabaseService'.
  Types of property 'transaction' are incompatible.
    Type '<T>(handler: (conn: IDatabaseConnection) => Promise<T>) => Promise<T>' is not assignable to type '<T>(fn: (conn: { execute(sql: string, params?: unknown[] | undefined): Promise<void>; query<T>(sql: string, params?: unknown[] | undefined): Promise<T[]>; }) => Promise<T>) => Promise<...>'.
      Types of parameters 'handler' and 'fn' are incompatible.
        Types of parameters 'conn' and 'conn' are incompatible.
          Type 'IDatabaseConnection' is not assignable to type '{ execute(sql: string, params?: unknown[] | undefined): Promise<void>; query<T>(sql: string, params?: unknown[] | undefined): Promise<T[]>; }'.
            The types returned by 'query(...)' are incompatible between these types.
              Type 'Promise<IQueryResult<unknown>>' is not assignable to type 'Promise<T[]>'.
                Type 'IQueryResult<unknown>' is missing the following properties from type 'T[]': length, pop, push, concat, and 29 more.
src/modules/core/database/index.ts(324,55): error TS2345: Argument of type 'DatabaseService' is not assignable to parameter of type 'IDatabaseService'.
  Types of property 'transaction' are incompatible.
    Type '<T>(handler: (conn: IDatabaseConnection) => Promise<T>) => Promise<T>' is not assignable to type '<T>(fn: (conn: { execute(sql: string, params?: unknown[] | undefined): Promise<void>; query<T>(sql: string, params?: unknown[] | undefined): Promise<T[]>; }) => Promise<T>) => Promise<...>'.
      Types of parameters 'handler' and 'fn' are incompatible.
        Types of parameters 'conn' and 'conn' are incompatible.
          Type 'IDatabaseConnection' is not assignable to type '{ execute(sql: string, params?: unknown[] | undefined): Promise<void>; query<T>(sql: string, params?: unknown[] | undefined): Promise<T[]>; }'.
            The types returned by 'query(...)' are incompatible between these types.
              Type 'Promise<IQueryResult<unknown>>' is not assignable to type 'Promise<T[]>'.
                Type 'IQueryResult<unknown>' is missing the following properties from type 'T[]': length, pop, push, concat, and 29 more.
src/modules/core/database/services/cli-handler.service.ts(685,33): error TS2556: A spread argument must either have a tuple type or be passed to a rest parameter.
src/modules/core/database/services/cli-handler.service.ts(698,33): error TS2556: A spread argument must either have a tuple type or be passed to a rest parameter.
src/modules/core/database/services/cli-handler.service.ts(748,2): error TS6133: 'format' is declared but its value is never read.
src/modules/core/database/services/cli-handler.service.ts(1007,34): error TS2556: A spread argument must either have a tuple type or be passed to a rest parameter.
src/modules/core/logger/services/error-handling.service.ts(293,69): error TS2532: Object is possibly 'undefined'.
src/modules/core/logger/services/error-handling.service.ts(297,88): error TS2532: Object is possibly 'undefined'.
src/modules/core/modules/services/module-scanner.service.ts(66,8): error TS2352: Conversion of type 'this' to type '{ logger?: ILogger; }' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
  Type 'ModuleScannerService' is not comparable to type '{ logger?: ILogger; }'.
    Property 'logger' is private in type 'ModuleScannerService' but not in type '{ logger?: ILogger; }'.
src/modules/core/modules/services/module-scanner.service.ts(297,26): error TS2475: 'const' enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment or type query.
src/modules/core/monitor/monitor-module.ts(64,32): error TS6138: Property 'db' is declared but its value is never read.
src/modules/core/monitor/monitor-module.ts(66,22): error TS6133: 'data' is declared but its value is never read.
src/modules/core/monitor/monitor-module.ts(70,20): error TS6133: 'query' is declared but its value is never read.
src/modules/core/monitor/monitor-module.ts(78,26): error TS6133: 'retentionDays' is declared but its value is never read.
src/modules/core/monitor/monitor-module.ts(192,9): error TS2412: Type 'undefined' is not assignable to type 'Timeout' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the type of the target.
src/modules/core/system/repositories/system-repository.ts(18,8): error TS2459: Module '"@/modules/core/system/types/index"' declares 'ModuleStatusEnum' locally, but it is not exported.
src/modules/core/webhooks/services/webhook-delivery-service.ts(132,11): error TS2375: Type '{ webhook_id: string; attempt: number; success: boolean; status_code: number | undefined; response_body: string | undefined; error: string | undefined; duration: number; delivered_at: Date; }' is not assignable to type 'WebhookDeliveryRecord' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'status_code' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/modules/core/webhooks/services/webhook-delivery-service.ts(183,13): error TS2375: Type '{ webhook_id: string; attempt: number; success: boolean; status_code: number | undefined; response_body: string | undefined; error: string | undefined; duration: number; delivered_at: Date; }' is not assignable to type 'WebhookDeliveryRecord' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'status_code' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/modules/loader.ts(199,17): error TS2339: Property 'exports' does not exist on type 'ModuleInterface'.
src/server/external/auth/providers/auth-module-adapter.ts(18,5): error TS2322: Type 'unknown' is not assignable to type 'IIdentityProvider | undefined'.
src/server/external/auth/providers/auth-module-adapter.ts(26,5): error TS2322: Type 'unknown[]' is not assignable to type 'IIdentityProvider[]'.
  Type 'unknown' is not assignable to type 'IIdentityProvider'.
src/server/external/auth/providers/generic-oauth2.ts(9,14): error TS6196: 'IDPUserInfo' is declared but never used.
src/server/external/auth/providers/generic-oauth2.ts(149,11): error TS6133: 'getBooleanValue' is declared but its value is never read.
src/server/external/rest/auth.ts(151,5): error TS2375: Type '{ accessToken: string; refreshToken: string | undefined; expiresIn: number | undefined; tokenType: string | undefined; scope: string | undefined; }' is not assignable to type 'TokenResponse' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'refreshToken' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/server/external/rest/config.ts(8,13): error TS6196: 'ExpressRequest' is declared but never used.
src/server/external/rest/oauth2/authorize.ts(491,44): error TS2379: Argument of type '{ scope: string; clientId: string; redirectUri: string; responseType: "code" | "code id_token"; state?: string | undefined; nonce?: string | undefined; provider?: string | undefined; codeChallenge?: string | undefined; codeChallengeMethod?: "S256" | ... 1 more ... | undefined; providerCode?: string | undefined; }' is not assignable to parameter of type 'IAuthorizeRequestParams' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'state' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/server/external/rest/oauth2/authorize.ts(547,51): error TS2379: Argument of type '{ scope: string; clientId: string; redirectUri: string; responseType: "code" | "code id_token"; state?: string | undefined; nonce?: string | undefined; provider?: string | undefined; codeChallenge?: string | undefined; codeChallengeMethod?: "S256" | ... 1 more ... | undefined; providerCode?: string | undefined; }' is not assignable to parameter of type 'IAuthorizeRequestParams' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'state' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/server/external/rest/oauth2/authorize.ts(571,79): error TS2366: Function lacks ending return statement and return type does not include 'undefined'.
src/server/external/rest/oauth2/token.ts(216,73): error TS2638: Type '{}' may represent a primitive value, which is not permitted as the right operand of the 'in' operator.
src/server/external/rest/types/config.types.ts(13,18): error TS2430: Interface 'IAuthenticatedRequest' incorrectly extends interface 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.
  Types of property 'user' are incompatible.
    Type '{ [key: string]: unknown; id: string; sub: string; email: string; name?: string; roles?: string[]; }' is not assignable to type 'User'.
      Property 'roles' is optional in type '{ [key: string]: unknown; id: string; sub: string; email: string; name?: string; roles?: string[]; }' but required in type 'User'.
src/server/mcp/core/handlers/prompt-handlers.ts(27,3): error TS6196: 'PromptMessage' is declared but never used.
