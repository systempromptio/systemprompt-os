name: modules
type: core
version: 1.0.0
description: Module lifecycle management for SystemPrompt OS
author: SystemPrompt OS Team <team@systemprompt-os.com>
config:
  modulesPath: ./src/modules
  extensionsPath: ./extensions
  registryUrl: https://registry.systemprompt.os
  autoDiscover: true
dependencies:
  - logger
  - config
cli:
  commands:
    - name: status
      description: Show module status (enabled/healthy)
      options:
        - name: format
          alias: f
          type: string
          description: Output format (text, json)
          choices: ['text', 'json']
          default: text
    - name: setup
      description: Setup and maintain module database
      options:
        - name: action
          type: string
          description: Action to perform
          choices: ['install', 'clean', 'update', 'validate']
          required: true
        - name: force
          type: boolean
          description: Force operation without confirmation
          default: false
        - name: format
          alias: f
          type: string
          description: Output format (text, json)
          choices: ['text', 'json']
          default: text
    - name: list
      description: List installed extensions and modules
      options:
        - name: type
          alias: t
          type: string
          description: Filter by type (module, server, all)
          default: all
        - name: format
          alias: f
          type: string
          description: Output format (text, json, table)
          default: text
    - name: install
      description: Install an extension
      options:
        - name: name
          type: string
          description: Extension name or path
          required: true
        - name: version
          alias: v
          type: string
          description: Specific version to install
        - name: force
          alias: f
          type: boolean
          description: Force installation even if already exists
    - name: remove
      description: Remove an extension
      options:
        - name: name
          type: string
          description: Extension name to remove
          required: true
        - name: preserve-config
          type: boolean
          description: Preserve configuration files
    - name: validate
      description: Validate module/extension structure and configuration
      options:
        - name: path
          alias: p
          type: string
          description: Path to module/extension directory
          required: false
        - name: all
          alias: a
          type: boolean
          description: Validate all modules in the core directory
          default: false
        - name: strict
          alias: s
          type: boolean
          description: Use strict validation rules
          default: false
        - name: fix
          alias: f
          type: boolean
          description: Attempt to fix common issues
          default: false
    - name: info
      description: Show detailed information about an extension
      options:
        - name: name
          type: string
          description: Extension name
          required: true
    - name: create
      description: Create a new module with proper structure
      options:
        - name: name
          alias: n
          type: string
          description: Module name (lowercase, alphanumeric with hyphens)
          required: true
        - name: type
          alias: t
          type: string
          description: Module type (service, daemon, plugin, core, extension)
          default: service
        - name: description
          alias: d
          type: string
          description: Module description
          default: A new SystemPrompt OS module
        - name: author
          alias: a
          type: string
          description: Module author
          default: SystemPrompt Team
        - name: style
          alias: s
          type: string
          description: Implementation style (class, function)
          default: class
        - name: path
          alias: p
          type: string
          description: Path to create module in
          default: ./src/modules/core
    - name: enable
      description: Enable a module
      options:
        - name: name
          alias: n
          type: string
          description: Module name to enable
          required: true
        - name: force
          alias: f
          type: boolean
          description: Force enable even if dependencies are missing
          default: false
    - name: disable
      description: Disable a module
      options:
        - name: name
          alias: n
          type: string
          description: Module name to disable
          required: true
        - name: force
          alias: f
          type: boolean
          description: Force disable even if other modules depend on it
          default: false
    - name: restart
      description: Restart a module
      options:
        - name: name
          alias: n
          type: string
          description: Module name to restart
          required: true
        - name: force
          alias: f
          type: boolean
          description: Force restart without graceful shutdown
          default: false
    - name: logs
      description: View module logs
      options:
        - name: name
          alias: n
          type: string
          description: Module name
          required: true
        - name: lines
          alias: l
          type: number
          description: Number of lines to show
          default: 50
        - name: follow
          alias: f
          type: boolean
          description: Follow log output
          default: false
        - name: level
          type: string
          description: Filter by log level (debug, info, warn, error)
        - name: since
          alias: s
          type: string
          description: Show logs since timestamp or duration
    - name: config
      description: Configure module settings
      options:
        - name: name
          alias: n
          type: string
          description: Module name
          required: true
        - name: get
          alias: g
          type: string
          description: Get a specific configuration value
        - name: set
          alias: s
          type: string
          description: "Set a configuration value (format: key=value)"
        - name: list
          alias: l
          type: boolean
          description: List all configuration values
          default: false
        - name: reset
          alias: r
          type: boolean
          description: Reset configuration to defaults
          default: false
        - name: export
          alias: e
          type: string
          description: Export configuration to file
        - name: import
          alias: i
          type: string
          description: Import configuration from file
        - name: format
          alias: f
          type: string
          description: Output format (json, yaml, text)
          default: text
    - name: health
      description: Check module health
      options:
        - name: name
          alias: n
          type: string
          description: Module name (or "all" for all modules)
          default: all
        - name: detailed
          alias: d
          type: boolean
          description: Show detailed health information
          default: false
        - name: format
          alias: f
          type: string
          description: Output format (text, json, table)
          default: text