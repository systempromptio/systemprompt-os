name: webhooks
type: service
version: 1.0.0
description: Event-driven webhook notifications for system events
author: SystemPrompt OS Team <team@systemprompt-os.com>
config:
  defaultTimeout: 30000
  defaultRetry:
    enabled: true
    maxAttempts: 3
    strategy: exponential
    initialDelay: 1000
    maxDelay: 60000
    multiplier: 2
  cleanup:
    interval: 86400000  # 24 hours
    retentionDays: 30
dependencies:
  - logger
  - database
apis:
  - name: WebhookService
    description: Main webhook management service
  - name: triggerWebhook
    description: Trigger webhooks for a specific event
cli:
  commands:
    - name: list
      description: List all configured webhooks
      options:
        - name: status
          alias: s
          type: string
          description: Filter by status (active, inactive, failed, suspended)
        - name: event
          alias: e
          type: string
          description: Filter by event type
        - name: format
          alias: f
          type: string
          description: Output format (table or json)
          default: table
    - name: create
      description: Create a new webhook
      options:
        - name: name
          alias: n
          type: string
          description: Webhook name
          required: true
        - name: url
          alias: u
          type: string
          description: Webhook URL
          required: true
        - name: events
          alias: e
          type: string
          description: Comma-separated list of events
          required: true
        - name: method
          alias: m
          type: string
          description: HTTP method (GET, POST, PUT, PATCH, DELETE)
          default: POST
        - name: headers
          alias: h
          type: string
          description: JSON string of custom headers
        - name: auth-type
          type: string
          description: Authentication type (none, basic, bearer, api-key, hmac)
          default: none
        - name: auth-credentials
          type: string
          description: JSON string of auth credentials
    - name: info
      description: Get detailed information about a webhook
      args:
        - name: id
          description: Webhook ID
          required: true
      options:
        - name: format
          alias: f
          type: string
          description: Output format (table or json)
          default: table
    - name: update
      description: Update webhook configuration
      args:
        - name: id
          description: Webhook ID
          required: true
      options:
        - name: name
          alias: n
          type: string
          description: New webhook name
        - name: url
          alias: u
          type: string
          description: New webhook URL
        - name: events
          alias: e
          type: string
          description: Comma-separated list of events
        - name: status
          alias: s
          type: string
          description: New status (active, inactive)
        - name: headers
          alias: h
          type: string
          description: JSON string of custom headers
    - name: delete
      description: Delete a webhook
      args:
        - name: id
          description: Webhook ID
          required: true
      options:
        - name: force
          alias: f
          type: boolean
          description: Skip confirmation prompt
    - name: test
      description: Test a webhook with a sample payload
      args:
        - name: id
          description: Webhook ID
          required: true
    - name: trigger
      description: Manually trigger a webhook event
      options:
        - name: event
          alias: e
          type: string
          description: Event type
          required: true
        - name: data
          alias: d
          type: string
          description: JSON string of event data
          required: true
        - name: metadata
          alias: m
          type: string
          description: JSON string of metadata
    - name: deliveries
      description: View webhook delivery history
      args:
        - name: id
          description: Webhook ID
          required: true
      options:
        - name: limit
          alias: l
          type: number
          description: Number of deliveries to show
          default: 20
        - name: format
          alias: f
          type: string
          description: Output format (table or json)
          default: table
    - name: stats
      description: View webhook statistics
      args:
        - name: id
          description: Webhook ID
          required: true
      options:
        - name: format
          alias: f
          type: string
          description: Output format (table or json)
          default: table
    - name: retry
      description: Retry a failed webhook delivery
      options:
        - name: webhook
          alias: w
          type: string
          description: Webhook ID
          required: true
        - name: delivery
          alias: d
          type: string
          description: Delivery ID
          required: true
    - name: pause
      description: Pause a webhook (set to inactive)
      args:
        - name: id
          description: Webhook ID
          required: true
    - name: resume
      description: Resume a paused webhook (set to active)
      args:
        - name: id
          description: Webhook ID
          required: true